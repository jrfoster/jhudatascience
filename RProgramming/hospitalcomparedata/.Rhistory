rankhospital("MD", "heart attack", "worst")
source('~/DevR/coursera/hospitalcomparedata/rankhospital.R')
rankhospital("TX", "heart failure", 4)
rankhospital("MD", "heart attack", "worst")
rankhospital("MN", "heart attack", 5000)
submit()
source("submitscript3.R")
submit()
submit()
submit()
submit()
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
split(outcomeData, outcomeData$State)
byState <- split(outcomeData, outcomeData$State)
byState$AK
class(byState)
class(byState$AK)
source('~/DevR/coursera/hospitalcomparedata/rankhospital.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
outcome <- "heart failure"
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
byState <- split(outcomeData, outcomeData$State)
rv <- sapply(byState, tryit, targetCol, num)
num <- "best"
rv <- sapply(byState, tryit, targetCol, num)
rv
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
rv <- sapply(byState, tryit, targetCol, num)
rv
class(rv)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
rv <- sapply(byState, tryit, targetCol, num)
class(rv)
rv2 <- as.data.frame(rv)
View(rv2)
unsplit(rv)
s1 <- byState$AK
factorData <- byState$AK
stateData <- factorData[order(factorData[, targetCol], factorData[, 1], na.last = NA), ]
View(stateData)
head(stateData, 1)
head(stateData, 1)
stateData[num, ]
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
View(stateData)
View(stateData)
stateData <- factorData[order(factorData[, targetCol], factorData[, 1], na.last = NA), ]
View(stateData)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
outcome <- "heart attack"
num <- "worst"
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
byState <- split(outcomeData, outcomeData$State)
rv <- apply(byState, tryit, targetCol, num)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
rv <- apply(byState, function(x, targetCol, num) {
stateData <- x[order(x[, targetCol], x[, 1], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, ]
}
})
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
outcome <- "heart attack"
num <- "best"
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
byState <- split(outcomeData, outcomeData$State)
rv <- lapply(byState, function(x) {
stateData <- x[order(x[, targetCol], x[, 1], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, ]
}
})
class(rv)
rv <- sapply(byState, function(x) {
stateData <- x[order(x[, targetCol], x[, 1], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, ]
}
})
class(rv)
rv
rv <- tapply(byState, function(x) {
stateData <- x[order(x[, targetCol], x[, 1], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, ]
}
})
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
rv <- vapply(byState, function(x) {
stateData <- x[order(x[, targetCol], x[, 1], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, ]
}
}, "data.frame")
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
rv <- vapply(byState, function(x) {
stateData <- x[order(x[, targetCol], x[, 1], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, ]
}
}, FUN.VALUE = "data.frame")
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
rv <- lapply(byState, function(x) {
stateData <- x[order(x[, targetCol], x[, 1], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, ]
}
})
class(rv)
head(rv)
head(rv, 1)
rv$AK
class(rv)
rv2 <- unsplit(rv, byState)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankhospital.R')
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
state <- "UT"
outcome <- "pneumonia"
num <- "best"
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
outcomeData <- fixupColumns(outcomeData)
stateData <- outcomeData[outcomeData$State == state, ]
stateData[which(stateData[, targetCol] == min(stateData[, targetCol], na.rm = TRUE))]
stateData[which.min(stateData[,targetCol]), ]
stateData[which(stateData[,targetCol] == min(stateData[, targetCol], na.rm = TRUE)), ]
stateData[which(stateData[,targetCol] == min(stateData[, targetCol], na.rm = FALS)), ]
stateData[which(stateData[,targetCol] == min(stateData[, targetCol], na.rm = FALSE)), ]
min(stateData$Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia)
min(stateData$Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia, na.rm = TRUE)
min(stateData[,targetCol], na.rm = TRUE)
stateData[which(stateData[, targetCol] = 9.9)]
stateData[which(stateData[, targetCol] == 9.9)]
stateData[which(stateData$Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia == 9.9)]
stateData[which(stateData$Hospital.30.Day.Death..Mortality..Rates.from.Pneumonia == 9.9),]
stateData[which(stateData[, targetCol] == 9.9), ]
stateData[which(!is.na(stateData[, targetCol] & stateData[, targetCol] == 9.9), ]
stateData[which(!is.na(stateData[, targetCol]) & stateData[, targetCol] == 9.9), ]
stateData[which(!is.na(stateData[, targetCol]) & stateData[, targetCol] == min(stateData[,targetCol], na.rm = TRUE)), ]
rv <- stateData[which(!is.na(stateData[, targetCol]) & stateData[, targetCol] == min(stateData[,targetCol], na.rm = TRUE)), ]
head(rv)
head(rv[, 1], 1)
rv <- stateData[which(!is.na(stateData[, targetCol]) & stateData[, targetCol] == max(stateData[,targetCol], na.rm = TRUE)), ]
head(rv[, 1], 1)
stateData <- stateData[order(stateData[, targetCol], stateData[, 1], na.last = NA), ]
stateData <- stateData[order(stateData[[targetCol]], stateData[[1]], na.last = NA), ]
View(stateData)
View(stateData)
stateData <- stateData[order(stateData[[targetCol]], stateData[[1]], na.last = NA), ]
head(stateData[, 1], 1)
tail(stateData[, 1], 1)
stateData[num, 1]
num <- 4
stateData[num, 1]
View(stateData)
View(stateData)
source('~/DevR/coursera/hospitalcomparedata/rankhospital.R')
head(stateData[[1]], 1)
source('~/DevR/coursera/hospitalcomparedata/rankhospital.R')
source('~/DevR/coursera/hospitalcomparedata/rankhospital.R')
rankhospital("TX", "heart failure", 4)
rankhospital("MD", "heart attack", "worst")
rankhospital("MN", "heart attack", 5000)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
outcome <- "pneumonia"
num <- "best"
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
byState <- split(outcomeData, outcomeData$State)
rv <- lapply(byState, function(x) {
stateData <- x[order(x[[targetCol]], x[[1]], na.last = NA), ]
if (num == "best") {
head(stateData[[1]], 1)
} else if (num == "worst") {
tail(stateData[[1]], 1)
} else {
stateData[num, 1]
}
})
rv2 <- unsplit(rv, byState)
rv2 <- unsplit(byState, outcomeData$State)
class(byState)
class(rv)
class(byState$AK)
class(rv$AK)
rv <- lapply(byState, function(x) {
stateData <- x[order(x[[targetCol]], x[[1]], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, 1]
}
})
class(rv)
class(rv$AK)
unsplit(rv, outcomeData$State)
unsplit(rv, levels(outcomeData$State))
rv
rv
names(byState) <- NULL
rv <- lapply(byState, function(x) {
stateData <- x[order(x[[targetCol]], x[[1]], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, 1]
}
})
unsplit(rv, outcomeData$State)
unsplit(rv, levels(byState))
unsplit(rv, levels(outcomeData$State))
unsplit(rv, outcomeData$State)
do.call(rbind, rv)
rv2 <- do.call(rbind, rv)
as.data.frame(rv2)
rv3 <- as.data.frame(rv2)
View(rv3)
rv2 <- as.data.frame(do.call(rbind, rv))
test <- rv2[, 1:2]
View(test)
View(test)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
tail(rankall("pneumonia", "worst"), 3)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
tail(rankall("pneumonia", "worst"), 3)
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
outcome <- "pneumonia"
num <- "best"
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
outcomeData <- fixupColumns(outcomeData)
byState <- split(outcomeData, outcomeData$State)
rv <- lapply(byState, function(x) {
stateData <- x[order(x[[targetCol]], x[[1]], na.last = NA), ]
if (num == "best") {
head(stateData, 1)
} else if (num == "worst") {
tail(stateData, 1)
} else {
stateData[num, 1]
}
})
rv2 <- unsplit(rv, byState)
rv2 <- unsplit(rv, levels(byState))
rv2 <- unpslit(rv, levels(outcomeData$State))
rv2 <- unsplit(rv, levels(outcomeData$State))
rv2[, 1:2]
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
head(rankall("heart attack"), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
head(rankall("heart attack"), 10)
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankhospital.R')
source('~/DevR/coursera/hospitalcomparedata/rankhospital.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
head(rankall("heart attack"), 10)
head(rankall("pneumonia"), 10)
tail(rankall("pneumonia", "worst"), 3)
tail(rankall("heart failure"), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
tail(rankall("heart failure"), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
tail(rankall("heart failure"), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
tail(rankall("heart failure"), 10)
tail(rankall("pneumonia", "worst"), 3)
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
outcome <- "heart attack"
num <- 20
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
outcomeData <- fixupColumns(outcomeData)
byState <- split(outcomeData, outcomeData$State)
rv <- lapply(byState, function(x) {
stateData <- x[order(x[[targetCol]], x[[1]], na.last = NA), ]
if (num == "best") {
r <- head(stateData, 1)
} else if (num == "worst") {
r <- tail(stateData, 1)
} else {
r <- stateData[c(20:20), ]
}
rownames(r) <- r[[2]]
r
})
stateData <- byState[order(byState[[targetCol]], byState[[1]], na.last = NA), ]
stateData <- byState$AK[order(byState$AK[[targetCol]], byState$AK[[1]], na.last = NA), ]
stateData[20, ]
View(stateData)
View(stateData)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
outcome <- "heart attack"
num <- 20
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
outcomeData <- fixupColumns(outcomeData)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
outcomeData <- fixupColumns(outcomeData)
targetCol = grep(getOutcomeRegex(outcome), colnames(outcomeData), ignore.case = TRUE)
byState <- split(outcomeData, outcomeData$State)
stateData <- x[order(x[[targetCol]], x[[1]], na.last = NA), ]
x <- byState
stateData <- x[order(x[[targetCol]], x[[1]], na.last = NA), ]
x <- byState$AK
stateData <- x[order(x[[targetCol]], x[[1]], na.last = NA), ]
head(stateData, 1)
tail(stateData, 1)
nrow(stateData)
stateData[num, ]
r <- head(stateData, 1)
class(r)
r <- tail(stateData, 1)
class(r)
r <- stateData[num, ]
class(r)
r <- data.frame(c(NA, stateData[1, 2], NA, NA, NA))
class(r)
r
nrow(r)
stateData[1,2]
stateData$State
df <- data.frame(row.names = stateData[1,2], stringsAsFactors = FALSE)
df
nrow(df)
ncol(df)
rbind(df, NA, stateData[1,2], NA, NA, NA)
cbind(df, NA, stateData[1,2], NA, NA, NA)
colnames(df) <- colnames(stateData)
names(df)
names(df)
df <- data.frame(dimnames = dimnames(stateData))
names(df)
dimnames(stateData)
df <- data.frame(dimnames = dimnames(stateData)[2,])
df <- data.frame(dimnames = colnames(stateData))
dimnames(df)
dimnames(stateData)
dimnames.data.frame(stateData)
dimnames.data.frame(stateData)[1,]
dimnames.data.frame(stateData)[1,2]
dimnames.data.frame(stateData)[,2]
dimnames.data.frame(stateData)
dimnames.data.frame(stateData)[1,1]
dimnames.data.frame(stateData)[[2]]
r <- stateData[num, ]
r[1,2] = stateData[1,2]
r
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
outcomeData <- read.csv("outcome-of-care-measures.csv", colClasses = c("NULL", "character", rep("NULL", 4), "character", rep("NULL", 3), "character", rep("NULL", 5), "character", rep("NULL", 5), "character", rep("NULL", 23)))
colnames(outcomeData)
df <- data.frame()
colnames(outcomeData)
colnames(df) <- colnames(outcomeData)
data.frame(matrix(NULL, nrow = 0, ncol = 5))
data.frame(matrix(NA, nrow = 0, ncol = 5))
colnames(df) <- colnames(outcomeData)
data.frame(matrix(NA, nrow = 1, ncol = 5))
colnames(df) <- colnames(outcomeData)
cn <- colnames(outcomeData)
cn
class(cn)
df <- data.frame(cn[1] = character(1))
df <- data.frame(cn)
df
df <- as.data.frame(cn)
df
as.data.frame(c(1,2,3))
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
tail(rankall("pneumonia", "worst"), 3)
tail(rankall("heart failure"), 10)
source("submitscript3.R")
submit()
source('~/DevR/coursera/hospitalcomparedata/rankall.R')
head(rankall("heart attack", 20), 10)
submit()
submit()
submit()
submit()
submit()
submit()
submit()
set.seed(1)
rpois(5,2)
